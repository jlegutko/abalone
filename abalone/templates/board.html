{% extends "base.html" %}
{% block title %}Board demo{% endblock %}
{% block content %}
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column col-8 col-mr-auto">
                    <div class="board">
                    {% for row in range(board.rows) %}
                        <div class="board-row">
                        {% for column in range(board.columns[row]) %}
                            <div class="box box-{{ row }},{{ count_yz(row, column, 'y') }},{{ count_yz(row, column, 'z') }}">
                                {% if guest and turn == g.user.id and g.user.id == creator.id and finish==0 %}
                                    {% if rule == '/game/<string:game_id>' %}
                                        {% if (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) in player_black.positions %}
                                            <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z'), current_user_id=g.user.id)}}" class="ball ball-black
                                             {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                            {% endif %}"></a>
                                        {% elif (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) in player_white.positions %}
                                            <div class ="ball ball-white"></div>
                                        {% endif %}
                                    {% elif rule == '/game/<string:game_id>/select/<int:coordinate_x>/<int:coordinate_y>/<int:coordinate_z>' %}
                                        {% if (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) in player_black.positions %}
                                            {% if ((row==coordinate_x + 1 and count_yz(row, column, 'y')==coordinate_y + 1) or (row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1) or (row==coordinate_x - 1 and count_yz(row, column, 'y')==coordinate_y - 1) or (count_yz(row, column, 'y')==coordinate_y + 1 and count_yz(row, column, 'z')==coordinate_z + 1) or (row==coordinate_x + 1 and count_yz(row, column, 'z')==coordinate_z - 1) or (count_yz(row, column, 'y')==coordinate_y - 1 and count_yz(row, column, 'z')==coordinate_z - 1) or (row==coordinate_x + 2 and count_yz(row, column, 'y')==coordinate_y + 2 and (coordinate_x + 1, coordinate_y + 1, coordinate_z) not in player_white.positions and (coordinate_x + 1, coordinate_y + 1, coordinate_z) in player_black.positions) or (row==coordinate_x - 2 and count_yz(row, column, 'y')==coordinate_y - 2 and (coordinate_x - 1, coordinate_y - 1, coordinate_z) not in player_white.positions and (coordinate_x - 1, coordinate_y - 1, coordinate_z) in player_black.positions) or (row==coordinate_x - 2 and count_yz(row, column, 'z')==coordinate_z + 2 and (coordinate_x - 1, coordinate_y, coordinate_z + 1) not in player_white.positions and (coordinate_x - 1, coordinate_y, coordinate_z + 1) in player_black.positions) or (row==coordinate_x + 2 and count_yz(row, column, 'z')==coordinate_z - 2 and (coordinate_x + 1, coordinate_y, coordinate_z - 1) not in player_white.positions and (coordinate_x + 1, coordinate_y, coordinate_z - 1) in player_black.positions) or (count_yz(row, column, 'y')==coordinate_y + 2 and count_yz(row, column, 'z')==coordinate_z + 2 and (coordinate_x, coordinate_y + 1, coordinate_z + 1) not in player_white.positions and (coordinate_x, coordinate_y + 1, coordinate_z + 1) in player_black.positions) or (count_yz(row, column, 'y')==coordinate_y - 2 and count_yz(row, column, 'z')==coordinate_z - 2 and (coordinate_x, coordinate_y - 1, coordinate_z - 1) not in player_white.positions and (coordinate_x, coordinate_y - 1, coordinate_z - 1) in player_black.positions) or (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)) %}
                                                <a href=" {{ url_for('select_multiple', game_id=game_id, coordinate_x=coordinate_x, coordinate_y=coordinate_y, coordinate_z=coordinate_z, second_x=row, second_y=count_yz(row, column, 'y'), second_z=count_yz(row, column, 'z')) }} " class="ball ball-black
                                                {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                    or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                {% endif %}"></a>
                                            {% else %}
                                                <div class ="ball ball-black"></div>
                                            {% endif %}
                                        {% elif (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) in player_white.positions %}
                                            <div class ="ball ball-white"></div>
                                        {% elif (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) not in player_white.positions and (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) not in player_black.positions %}
                                            {% if ((row==coordinate_x + 1 and count_yz(row, column, 'y')==coordinate_y + 1) or (row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1) or (row==coordinate_x - 1 and count_yz(row, column, 'y')==coordinate_y - 1) or (count_yz(row, column, 'y')==coordinate_y + 1 and count_yz(row, column, 'z')==coordinate_z + 1) or (row==coordinate_x + 1 and count_yz(row, column, 'z')==coordinate_z - 1) or (count_yz(row, column, 'y')==coordinate_y - 1 and count_yz(row, column, 'z')==coordinate_z - 1)) %}
                                                <a href="{{ url_for('move', game_id=game_id, coordinate_x=coordinate_x, coordinate_y=coordinate_y, coordinate_z=coordinate_z, to_x=row, to_y=count_yz(row, column, 'y'), to_z=count_yz(row, column, 'z')) }}" class="slot"></a>
                                            {% endif %}
                                        {% endif %}
                                    {% elif rule == '/game/<string:game_id>/select/<int:coordinate_x>/<int:coordinate_y>/<int:coordinate_z>/<int:second_x>/<int:second_y>/<int:second_z>' %}
                                            {% if (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) in player_black.positions %}
                                                 {% if second_x==coordinate_x + 2 and second_y==coordinate_y + 2 %}
                                                    {% if row==coordinate_x + 1 and count_yz(row, column, 'y')==coordinate_y + 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black ball-selected"></a>
                                                    {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% elif coordinate_x==second_x + 2 and coordinate_y==second_y + 2 %}
                                                     {% if row==second_x + 1 and count_yz(row, column, 'y')==second_y + 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black ball-selected"></a>
                                                    {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% elif second_x==coordinate_x - 2 and second_y==coordinate_y - 2 %}
                                                    {% if row==coordinate_x - 1 and count_yz(row, column, 'y')==coordinate_y - 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black ball-selected"></a>
                                                    {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% elif coordinate_x==second_x - 2 and coordinate_y==second_y - 2 %}
                                                     {% if row==second_x - 1 and count_yz(row, column, 'y')==second_y - 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black ball-selected"></a>
                                                    {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% elif second_x==coordinate_x - 2 and second_z==coordinate_z + 2 %}
                                                    {% if row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black ball-selected"></a>
                                                    {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% elif coordinate_x==second_x - 2 and coordinate_z==second_z + 2 %}
                                                     {% if row==second_x - 1 and count_yz(row, column, 'z')==second_z + 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black ball-selected"></a>
                                                    {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% elif second_x==coordinate_x + 2 and second_z==coordinate_z - 2 %}
                                                    {% if row==coordinate_x + 1 and count_yz(row, column, 'z')==coordinate_z - 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black ball-selected"></a>
                                                    {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% elif coordinate_x==second_x + 2 and coordinate_z==second_z - 2 %}
                                                     {% if row==second_x + 1 and count_yz(row, column, 'z')==second_z - 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black ball-selected"></a>
                                                    {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% elif second_y==coordinate_y + 2 and second_z==coordinate_z + 2 %}
                                                    {% if count_yz(row, column, 'y')==coordinate_y + 1 and count_yz(row, column, 'z')==coordinate_z + 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black ball-selected"></a>
                                                    {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% elif coordinate_y==second_y + 2 and coordinate_z==second_z + 2 %}
                                                     {% if count_yz(row, column, 'y')==second_y + 1 and count_yz(row, column, 'z')==second_z + 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black ball-selected"></a>
                                                    {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% elif second_y==coordinate_y - 2 and second_z==coordinate_z - 2 %}
                                                    {% if count_yz(row, column, 'y')==coordinate_y - 1 and count_yz(row, column, 'z')==coordinate_z - 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black ball-selected"></a>
                                                    {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% elif coordinate_y==second_y - 2 and coordinate_z==second_z - 2 %}
                                                     {% if count_yz(row, column, 'y')==second_y - 1 and count_yz(row, column, 'z')==second_z - 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black ball-selected"></a>
                                                     {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% else %}
                                                     <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-black
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                 {% endif %}
                                            {% elif (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) in player_white.positions %}
                                                {% if row==coordinate_x==second_x or count_yz(row, column, 'y')==coordinate_y==second_y or count_yz(row, column, 'z')==coordinate_z==second_z %}
                                                    {% if (second_x - coordinate_x==1 or coordinate_x - second_x==1) or (second_y - coordinate_y==1 or coordinate_y - second_y==1) or (second_z - coordinate_z==1 or coordinate_z - second_z==1) %}
                                                        {% if (count_yz(row, column, 'y')==coordinate_y - 1 and count_yz(row, column, 'z')==coordinate_z - 1 and (coordinate_x, coordinate_y - 2, coordinate_z - 2) not in player_white.positions and (coordinate_x, coordinate_y - 2, coordinate_z - 2) not in player_black.positions) or (count_yz(row, column, 'y')==second_y - 1 and count_yz(row, column, 'z')==second_z - 1 and (second_x, second_y - 2, second_z - 2) not in player_white.positions and (second_x, second_y - 2, second_z - 2) not in player_black.positions) or (count_yz(row, column, 'y')==coordinate_y + 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x, coordinate_y + 2, coordinate_z + 2) not in player_white.positions and (coordinate_x, coordinate_y + 2, coordinate_z + 2) not in player_black.positions) or (count_yz(row, column, 'y')==second_y + 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x, second_y + 2, second_z + 2) not in player_white.positions and (second_x, second_y + 2, second_z + 2) not in player_black.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x - 2, coordinate_y, coordinate_z + 2) not in player_white.positions and (coordinate_x - 2, coordinate_y, coordinate_z + 2) not in player_black.positions) or (row==second_x - 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x - 2, second_y, second_z + 2) not in player_white.positions and (second_x - 2, second_y, second_z + 2) not in player_black.positions) or (row==coordinate_x + 1 and count_yz(row, column, 'z')==coordinate_z - 1 and (coordinate_x + 2, coordinate_y, coordinate_z - 2) not in player_white.positions and (coordinate_x + 2, coordinate_y, coordinate_z - 2) not in player_black.positions) or (row==second_x + 1 and count_yz(row, column, 'z')==second_z - 1 and (second_x + 2, second_y, second_z - 2) not in player_white.positions and (second_x + 2, second_y, second_z - 2) not in player_black.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x - 2, coordinate_y, coordinate_z + 2) not in player_white.positions and (coordinate_x - 2, coordinate_y, coordinate_z + 2) not in player_black.positions) or (row==second_x - 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x - 2, second_y, second_z + 2) not in player_white.positions and (second_x - 2, second_y, second_z + 2) not in player_black.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'y')==coordinate_y - 1 and (coordinate_x - 2, coordinate_y - 2, coordinate_z) not in player_white.positions and (coordinate_x - 2, coordinate_y - 2, coordinate_z) not in player_black.positions) or (row==second_x - 1 and count_yz(row, column, 'y')==second_y - 1 and (second_x - 2, second_y - 2, second_z) not in player_white.positions and (second_x - 2, second_y - 2, second_z) not in player_black.positions) or (row==coordinate_x + 1 and count_yz(row, column, 'y')==coordinate_y + 1 and (coordinate_x + 2, coordinate_y + 2, coordinate_z) not in player_white.positions and (coordinate_x + 2, coordinate_y + 2, coordinate_z) not in player_black.positions) or (row==second_x + 1 and count_yz(row, column, 'y')==second_y + 1 and (second_x + 2, second_y + 2, second_z) not in player_white.positions and (second_x + 2, second_y + 2, second_z) not in player_black.positions) %}
                                                            <a href="{{ url_for('move_multiple', game_id=game_id, coordinate_x=coordinate_x, coordinate_y=coordinate_y, coordinate_z=coordinate_z, second_x=second_x, second_y=second_y, second_z=second_z, to_x=row, to_y=count_yz(row, column, 'y'), to_z=count_yz(row, column, 'z')) }}" class="ball ball-white ball-to-push"></a>
                                                        {% else %}
                                                            <div class="ball ball-white"></div>
                                                        {% endif %}
                                                    {% elif (second_x - coordinate_x==2 or coordinate_x - second_x==2) or (second_y - coordinate_y==2 or coordinate_y - second_y==2) or (second_z - coordinate_z==2 or coordinate_z - second_z==2) %}
                                                        {% if (count_yz(row, column, 'y')==coordinate_y - 1 and count_yz(row, column, 'z')==coordinate_z - 1 and (coordinate_x, coordinate_y - 2, coordinate_z - 2) not in player_white.positions and (coordinate_x, coordinate_y - 2, coordinate_z - 2) not in player_black.positions) or (count_yz(row, column, 'y')==second_y - 1 and count_yz(row, column, 'z')==second_z - 1 and (second_x, second_y - 2, second_z - 2) not in player_white.positions and (second_x, second_y - 2, second_z - 2) not in player_black.positions) or (count_yz(row, column, 'y')==coordinate_y + 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x, coordinate_y + 2, coordinate_z + 2) not in player_white.positions and (coordinate_x, coordinate_y + 2, coordinate_z + 2) not in player_black.positions) or (count_yz(row, column, 'y')==second_y + 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x, second_y + 2, second_z + 2) not in player_white.positions and (second_x, second_y + 2, second_z + 2) not in player_black.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x - 2, coordinate_y, coordinate_z + 2) not in player_white.positions and (coordinate_x - 2, coordinate_y, coordinate_z + 2) not in player_black.positions) or (row==second_x - 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x - 2, second_y, second_z + 2) not in player_white.positions and (second_x - 2, second_y, second_z + 2) not in player_black.positions) or (row==coordinate_x + 1 and count_yz(row, column, 'z')==coordinate_z - 1 and (coordinate_x + 2, coordinate_y, coordinate_z - 2) not in player_white.positions and (coordinate_x + 2, coordinate_y, coordinate_z - 2) not in player_black.positions) or (row==second_x + 1 and count_yz(row, column, 'z')==second_z - 1 and (second_x + 2, second_y, second_z - 2) not in player_white.positions and (second_x + 2, second_y, second_z - 2) not in player_black.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x - 2, coordinate_y, coordinate_z + 2) not in player_white.positions and (coordinate_x - 2, coordinate_y, coordinate_z + 2) not in player_black.positions) or (row==second_x - 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x - 2, second_y, second_z + 2) not in player_white.positions and (second_x - 2, second_y, second_z + 2) not in player_black.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'y')==coordinate_y - 1 and (coordinate_x - 2, coordinate_y - 2, coordinate_z) not in player_white.positions and (coordinate_x - 2, coordinate_y - 2, coordinate_z) not in player_black.positions) or (row==second_x - 1 and count_yz(row, column, 'y')==second_y - 1 and (second_x - 2, second_y - 2, second_z) not in player_white.positions and (second_x - 2, second_y - 2, second_z) not in player_black.positions) or (row==coordinate_x + 1 and count_yz(row, column, 'y')==coordinate_y + 1 and (coordinate_x + 2, coordinate_y + 2, coordinate_z) not in player_white.positions and (coordinate_x + 2, coordinate_y + 2, coordinate_z) not in player_black.positions) or (row==second_x + 1 and count_yz(row, column, 'y')==second_y + 1 and (second_x + 2, second_y + 2, second_z) not in player_white.positions and (second_x + 2, second_y + 2, second_z) not in player_black.positions) %}
                                                            <a href="{{ url_for('move_multiple', game_id=game_id, coordinate_x=coordinate_x, coordinate_y=coordinate_y, coordinate_z=coordinate_z, second_x=second_x, second_y=second_y, second_z=second_z, to_x=row, to_y=count_yz(row, column, 'y'), to_z=count_yz(row, column, 'z')) }}" class="ball ball-white ball-to-push"></a>
                                                        {% elif (count_yz(row, column, 'y')==coordinate_y - 1 and count_yz(row, column, 'z')==coordinate_z - 1 and (coordinate_x, coordinate_y - 2, coordinate_z - 2) in player_white.positions and (coordinate_x, coordinate_y - 3, coordinate_z - 3) not in player_black.positions and (coordinate_x, coordinate_y - 3, coordinate_z - 3) not in player_white.positions) or (count_yz(row, column, 'y')==second_y - 1 and count_yz(row, column, 'z')==second_z - 1 and (second_x, second_y - 2, second_z - 2) in player_white.positions and (second_x, second_y - 3, second_z - 3) not in player_black.positions and (second_x, second_y - 3, second_z - 3) not in player_white.positions) or (count_yz(row, column, 'y')==coordinate_y + 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x, coordinate_y + 2, coordinate_z + 2) in player_white.positions and (coordinate_x, coordinate_y + 3, coordinate_z + 3) not in player_black.positions and (coordinate_x, coordinate_y + 3, coordinate_z + 3) not in player_white.positions) or (count_yz(row, column, 'y')==second_y + 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x, second_y + 2, second_z + 2) in player_white.positions and (second_x, second_y + 3, second_z + 3) not in player_black.positions and (second_x, second_y + 3, second_z + 3) not in player_white.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x - 2, coordinate_y, coordinate_z + 2) in player_white.positions and (coordinate_x - 3, coordinate_y, coordinate_z + 3) not in player_black.positions and (coordinate_x - 3, coordinate_y, coordinate_z + 3) not in player_white.positions) or (row==second_x - 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x - 2, second_y, second_z + 2) in player_white.positions and (second_x - 3, second_y, second_z + 3) not in player_black.positions  and (second_x - 3, second_y, second_z + 3) not in player_white.positions) or (row==coordinate_x + 1 and count_yz(row, column, 'z')==coordinate_z - 1 and (coordinate_x + 2, coordinate_y, coordinate_z - 2) in player_white.positions and (coordinate_x + 3, coordinate_y, coordinate_z - 3) not in player_black.positions and (coordinate_x + 3, coordinate_y, coordinate_z - 3) not in player_white.positions) or (row==second_x + 1 and count_yz(row, column, 'z')==second_z - 1 and (second_x + 2, second_y, second_z - 2) in player_white.positions and (second_x + 3, second_y, second_z - 3) not in player_black.positions and (second_x + 3, second_y, second_z - 3) not in player_white.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x - 2, coordinate_y, coordinate_z + 2) in player_white.positions and (coordinate_x - 3, coordinate_y, coordinate_z + 3) not in player_black.positions and (coordinate_x - 3, coordinate_y, coordinate_z + 3) not in player_white.positions) or (row==second_x - 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x - 2, second_y, second_z + 2) in player_white.positions and (second_x - 3, second_y, second_z + 3) not in player_black.positions and (second_x - 3, second_y, second_z + 3) not in player_white.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'y')==coordinate_y - 1 and (coordinate_x - 2, coordinate_y - 2, coordinate_z) in player_white.positions and (coordinate_x - 3, coordinate_y - 3, coordinate_z) not in player_black.positions and (coordinate_x - 3, coordinate_y - 3, coordinate_z) not in player_white.positions) or (row==second_x - 1 and count_yz(row, column, 'y')==second_y - 1 and (second_x - 2, second_y - 2, second_z) in player_white.positions and (second_x - 3, second_y - 3, second_z) not in player_black.positions and (second_x - 3, second_y - 3, second_z) not in player_white.positions) or (row==coordinate_x + 1 and count_yz(row, column, 'y')==coordinate_y + 1 and (coordinate_x + 2, coordinate_y + 2, coordinate_z) in player_white.positions and (coordinate_x + 3, coordinate_y + 3, coordinate_z) not in player_black.positions and (coordinate_x + 3, coordinate_y + 3, coordinate_z) not in player_white.positions) or (row==second_x + 1 and count_yz(row, column, 'y')==second_y + 1 and (second_x + 2, second_y + 2, second_z) in player_white.positions and (second_x + 3, second_y + 3, second_z) not in player_black.positions and (second_x + 3, second_y + 3, second_z) not in player_white.positions) %}
                                                            <a href="{{ url_for('move_multiple', game_id=game_id, coordinate_x=coordinate_x, coordinate_y=coordinate_y, coordinate_z=coordinate_z, second_x=second_x, second_y=second_y, second_z=second_z, to_x=row, to_y=count_yz(row, column, 'y'), to_z=count_yz(row, column, 'z')) }}" class="ball ball-white ball-to-push"></a>
                                                        {% else %}
                                                            <div class="ball ball-white"></div>
                                                        {% endif %}
                                                    {% else %}
                                                        <div class="ball ball-white"></div>
                                                    {% endif %}
                                                {% else %}
                                                    <div class="ball ball-white"></div>
                                                {% endif %}
                                            {% elif (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) not in player_white.positions and (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) not in player_black.positions %}
                                                {% if coordinate_x == second_x %}
                                                    {% if coordinate_y - second_y > 0 and coordinate_z - second_z > 0 %}
                                                        {% if ((row==coordinate_x + 1 and count_yz(row, column, 'y')==coordinate_y + 1 and (coordinate_x + 1, coordinate_y, coordinate_z - 1) not in player_black.positions and (coordinate_x + 1, coordinate_y, coordinate_z - 1) not in player_white.positions and (second_x + 1, second_y + 1, second_z) not in player_black.positions and (second_x + 1, second_y + 1, second_z) not in player_white.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x - 1, coordinate_y - 1, coordinate_z) not in player_black.positions and (coordinate_x - 1, coordinate_y - 1, coordinate_z) not in player_white.positions and (second_x - 1, second_y, second_z + 1) not in player_black.positions and (second_x - 1, second_y, second_z + 1) not in player_white.positions) or (count_yz(row, column, 'y')==coordinate_y + 1 and count_yz(row, column, 'z')==coordinate_z + 1) or (count_yz(row, column, 'y')==coordinate_y - 1 and count_yz(row, column, 'z')==coordinate_z - 1) or (row==second_x - 1 and count_yz(row, column, 'y')==second_y - 1 and (second_x - 1, second_y, second_z + 1) not in player_black.positions and (second_x - 1, second_y, second_z + 1) not in player_white.positions and (coordinate_x - 1, coordinate_y - 1, coordinate_z) not in player_black.positions and (coordinate_x - 1, coordinate_y - 1, coordinate_z) not in player_white.positions) or (row==second_x + 1 and count_yz(row, column, 'z')==second_z - 1 and (second_x + 1, second_y + 1, second_z) not in player_black.positions and (second_x + 1, second_y + 1, second_z) not in player_white.positions and (coordinate_x + 1, coordinate_y, coordinate_z - 1) not in player_black.positions and (coordinate_x + 1, coordinate_y, coordinate_z - 1) not in player_white.positions) or (count_yz(row, column, 'y')==second_y + 1 and count_yz(row, column, 'z')==second_z + 1) or (count_yz(row, column, 'y')==second_y - 1 and count_yz(row, column, 'z')==second_z - 1)) %}
                                                            <a href="{{ url_for('move_multiple', game_id=game_id, coordinate_x=coordinate_x, coordinate_y=coordinate_y, coordinate_z=coordinate_z, second_x=second_x, second_y=second_y, second_z=second_z, to_x=row, to_y=count_yz(row, column, 'y'), to_z=count_yz(row, column, 'z')) }}" class="slot"></a>
                                                        {% endif %}
                                                    {% elif coordinate_y - second_y < 0 and coordinate_z - second_z < 0 %}
                                                        {% if ((row==second_x + 1 and count_yz(row, column, 'y')==second_y + 1 and (second_x + 1, second_y, second_z - 1) not in player_black.positions and (second_x + 1, second_y, second_z - 1) not in player_white.positions and (coordinate_x + 1, coordinate_y + 1, coordinate_z) not in player_black.positions and (coordinate_x + 1, coordinate_y + 1, coordinate_z) not in player_white.positions) or (row==second_x - 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x - 1, second_y - 1, second_z) not in player_black.positions and (second_x - 1, second_y - 1, second_z) not in player_white.positions and (coordinate_x - 1, coordinate_y, coordinate_z + 1) not in player_black.positions and (coordinate_x - 1, coordinate_y, coordinate_z + 1) not in player_white.positions) or (count_yz(row, column, 'y')==second_y + 1 and count_yz(row, column, 'z')==second_z + 1) or (count_yz(row, column, 'y')==second_y - 1 and count_yz(row, column, 'z')==second_z - 1) or (row==coordinate_x - 1 and count_yz(row, column, 'y')==coordinate_y - 1 and (coordinate_x - 1, coordinate_y, coordinate_z + 1) not in player_black.positions and (coordinate_x - 1, coordinate_y, coordinate_z + 1) not in player_white.positions and (second_x - 1, second_y - 1, second_z) not in player_black.positions and (second_x - 1, second_y - 1, second_z) not in player_white.positions) or (row==coordinate_x + 1 and count_yz(row, column, 'z')==coordinate_z - 1 and (coordinate_x + 1, coordinate_y + 1, coordinate_z) not in player_black.positions and (coordinate_x + 1, coordinate_y + 1, coordinate_z) not in player_white.positions and (second_x + 1, second_y, second_z - 1) not in player_black.positions and (second_x + 1, second_y, second_z - 1) not in player_white.positions) or (count_yz(row, column, 'y')==coordinate_y + 1 and count_yz(row, column, 'z')==coordinate_z + 1) or (count_yz(row, column, 'y')==coordinate_y - 1 and count_yz(row, column, 'z')==coordinate_z - 1)) %}
                                                            <a href="{{ url_for('move_multiple', game_id=game_id, coordinate_x=coordinate_x, coordinate_y=coordinate_y, coordinate_z=coordinate_z, second_x=second_x, second_y=second_y, second_z=second_z, to_x=row, to_y=count_yz(row, column, 'y'), to_z=count_yz(row, column, 'z')) }}" class="slot"></a>
                                                        {% endif %}
                                                    {% endif %}
                                                {% elif coordinate_y == second_y %}
                                                    {% if coordinate_x - second_x > 0 and coordinate_z - second_z < 0 %}
                                                        {% if ((row==second_x - 1 and count_yz(row, column, 'z')==second_z + 1) or (row==second_x - 1 and count_yz(row, column, 'y')==second_y - 1 and (second_x, second_y - 1, second_z - 1) not in player_black.positions and (second_x, second_y - 1, second_z - 1) not in player_white.positions and (coordinate_x - 1, coordinate_y - 1, coordinate_z) not in player_black.positions and (coordinate_x - 1, coordinate_y - 1, coordinate_z) not in player_white.positions) or (count_yz(row, column, 'y')==second_y + 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x + 1, second_y + 1, second_z) not in player_black.positions and (second_x + 1, second_y + 1, second_z) not in player_white.positions and (coordinate_x, coordinate_y + 1, coordinate_z + 1) not in player_black.positions and (coordinate_x, coordinate_y + 1, coordinate_z + 1) not in player_white.positions) or (row==second_x + 1 and count_yz(row, column, 'z')==second_z - 1) or (row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1) or (row==coordinate_x + 1 and count_yz(row, column, 'y')==coordinate_y + 1 and (coordinate_x, coordinate_y + 1, coordinate_z + 1) not in player_black.positions and (coordinate_x, coordinate_y + 1, coordinate_z + 1) not in player_white.positions and (second_x + 1, second_y + 1, second_z) not in player_black.positions and (second_x + 1, second_y + 1, second_z) not in player_white.positions) or (count_yz(row, column, 'y')==coordinate_y - 1 and count_yz(row, column, 'z')==coordinate_z - 1 and (coordinate_x - 1, coordinate_y - 1, coordinate_z) not in player_black.positions and (coordinate_x - 1, coordinate_y - 1, coordinate_z) not in player_white.positions and (second_x, second_y - 1, second_z - 1) not in player_black.positions and (second_x, second_y - 1, second_z - 1) not in player_white.positions) or (row==coordinate_x + 1 and count_yz(row, column, 'z')==coordinate_z - 1)) %}
                                                            <a href="{{ url_for('move_multiple', game_id=game_id, coordinate_x=coordinate_x, coordinate_y=coordinate_y, coordinate_z=coordinate_z, second_x=second_x, second_y=second_y, second_z=second_z, to_x=row, to_y=count_yz(row, column, 'y'), to_z=count_yz(row, column, 'z')) }}" class="slot"></a>
                                                        {% endif %}
                                                    {% elif coordinate_x - second_x < 0 and coordinate_z - second_z > 0 %}
                                                        {% if ((row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1) or (row==coordinate_x - 1 and count_yz(row, column, 'y')==coordinate_y - 1 and (coordinate_x, coordinate_y - 1, coordinate_z - 1) not in player_black.positions and (coordinate_x, coordinate_y - 1, coordinate_z - 1) not in player_white.positions and (second_x - 1, second_y - 1, second_z) not in player_black.positions and (second_x - 1, second_y - 1, second_z) not in player_white.positions) or (count_yz(row, column, 'y')==coordinate_y + 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x + 1, coordinate_y + 1, coordinate_z) not in player_black.positions and (coordinate_x + 1, coordinate_y + 1, coordinate_z) not in player_white.positions and (second_x, second_y + 1, second_z + 1) not in player_black.positions and (second_x, second_y + 1, second_z + 1) not in player_white.positions) or (row==coordinate_x + 1 and count_yz(row, column, 'z')==coordinate_z - 1) or (row==second_x - 1 and count_yz(row, column, 'z')==second_z + 1) or (row==second_x + 1 and count_yz(row, column, 'y')==second_y + 1 and (second_x, second_y + 1, second_z + 1) not in player_black.positions and (second_x, second_y + 1, second_z + 1) not in player_white.positions and (coordinate_x + 1, coordinate_y + 1, coordinate_z) not in player_black.positions and (coordinate_x + 1, coordinate_y + 1, coordinate_z) not in player_white.positions) or (count_yz(row, column, 'y')==second_y - 1 and count_yz(row, column, 'z')==second_z - 1 and (second_x - 1, second_y - 1, second_z) not in player_black.positions and (second_x - 1, second_y - 1, second_z) not in player_white.positions and (coordinate_x, coordinate_y - 1, coordinate_z - 1) not in player_black.positions and (coordinate_x, coordinate_y - 1, coordinate_z - 1) not in player_white.positions) or (row==second_x + 1 and count_yz(row, column, 'z')==second_z - 1)) %}
                                                            <a href="{{ url_for('move_multiple', game_id=game_id, coordinate_x=coordinate_x, coordinate_y=coordinate_y, coordinate_z=coordinate_z, second_x=second_x, second_y=second_y, second_z=second_z, to_x=row, to_y=count_yz(row, column, 'y'), to_z=count_yz(row, column, 'z')) }}" class="slot"></a>
                                                        {% endif %}
                                                    {% endif %}
                                                {% elif coordinate_z == second_z %}
                                                    {% if coordinate_y - second_y > 0 and coordinate_x - second_x > 0 %}
                                                        {% if ((row==coordinate_x + 1 and count_yz(row, column, 'y')==coordinate_y + 1) or (row==coordinate_x + 1 and count_yz(row, column, 'z')==coordinate_z - 1 and (coordinate_x, coordinate_y + 1, coordinate_z - 1) not in player_black.positions and (coordinate_x, coordinate_y + 1, coordinate_z - 1) not in player_white.positions and (second_x + 1, second_y, second_z - 1) not in player_black.positions and (second_x + 1, second_y, second_z - 1) not in player_white.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'y')==coordinate_y - 1) or (count_yz(row, column, 'y')==coordinate_y + 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x - 1, coordinate_y, coordinate_z + 1) not in player_black.positions and (coordinate_x - 1, coordinate_y, coordinate_z + 1) not in player_white.positions and (second_x, second_y + 1, second_z + 1) not in player_black.positions and (second_x, second_y + 1, second_z + 1) not in player_white.positions) or (row==second_x + 1 and count_yz(row, column, 'y')==second_y + 1) or (row==second_x - 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x, second_y + 1, second_z + 1) not in player_black.positions and (second_x, second_y + 1, second_z + 1) not in player_white.positions and (coordinate_x - 1, coordinate_y, coordinate_z + 1) not in player_black.positions and (coordinate_x - 1, coordinate_y, coordinate_z + 1) not in player_white.positions) or (row==second_x - 1 and count_yz(row, column, 'y')==second_y - 1) or (count_yz(row, column, 'y')==second_y - 1 and count_yz(row, column, 'z')==second_z - 1 and (second_x + 1, second_y, second_z - 1) not in player_black.positions and (second_x + 1, second_y, second_z - 1) not in player_white.positions and (coordinate_x , coordinate_y + 1, coordinate_z - 1) not in player_black.positions and (coordinate_x , coordinate_y + 1, coordinate_z - 1) not in player_white.positions)) %}
                                                            <a href="{{ url_for('move_multiple', game_id=game_id, coordinate_x=coordinate_x, coordinate_y=coordinate_y, coordinate_z=coordinate_z, second_x=second_x, second_y=second_y, second_z=second_z, to_x=row, to_y=count_yz(row, column, 'y'), to_z=count_yz(row, column, 'z')) }}" class="slot"></a>
                                                        {% endif %}
                                                    {% elif coordinate_y - second_y < 0 and coordinate_x - second_x < 0 %}
                                                        {% if ((row==second_x + 1 and count_yz(row, column, 'y')==second_y + 1) or (row==second_x + 1 and count_yz(row, column, 'z')==second_z - 1 and (second_x, second_y + 1, second_z - 1) not in player_black.positions and (second_x, second_y + 1, second_z - 1) not in player_white.positions and (coordinate_x + 1, coordinate_y, coordinate_z - 1) not in player_black.positions and (coordinate_x + 1, coordinate_y, coordinate_z - 1) not in player_white.positions) or (row==second_x - 1 and count_yz(row, column, 'y')==second_y - 1) or (count_yz(row, column, 'y')==second_y + 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x - 1, second_y, second_z + 1) not in player_black.positions and (second_x - 1, second_y, second_z + 1) not in player_white.positions and (coordinate_x, coordinate_y + 1, coordinate_z + 1) not in player_black.positions and (coordinate_x, coordinate_y + 1, coordinate_z + 1) not in player_white.positions) or (row==coordinate_x + 1 and count_yz(row, column, 'y')==coordinate_y + 1) or (row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x, coordinate_y + 1, coordinate_z + 1) not in player_black.positions and (coordinate_x, coordinate_y + 1, coordinate_z + 1) not in player_white.positions and (second_x - 1, second_y, second_z + 1) not in player_black.positions and (second_x - 1, second_y, second_z + 1) not in player_white.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'y')==coordinate_y - 1) or (count_yz(row, column, 'y')==coordinate_y - 1 and count_yz(row, column, 'z')==coordinate_z - 1 and (coordinate_x + 1, coordinate_y, coordinate_z - 1) not in player_black.positions and (coordinate_x + 1, coordinate_y, coordinate_z - 1) not in player_white.positions and (second_x , second_y + 1, second_z - 1) not in player_black.positions and (second_x , second_y + 1, second_z - 1) not in player_white.positions)) %}
                                                            <a href="{{ url_for('move_multiple', game_id=game_id, coordinate_x=coordinate_x, coordinate_y=coordinate_y, coordinate_z=coordinate_z, second_x=second_x, second_y=second_y, second_z=second_z, to_x=row, to_y=count_yz(row, column, 'y'), to_z=count_yz(row, column, 'z')) }}" class="slot"></a>
                                                        {% endif %}
                                                    {% endif %}
                                                {% endif %}
                                            {% endif %}
                                    {% endif %}
                                {% elif guest and turn == guest.id and g.user.id == guest.id and finish==0 %}
                                    {% if rule == '/game/<string:game_id>' %}
                                        {% if (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) in player_white.positions %}
                                            <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white
                                             {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                            {% endif %}"></a>
                                        {% elif (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) in player_black.positions %}
                                            <div class ="ball ball-black"></div>
                                        {% endif %}
                                    {% elif rule == '/game/<string:game_id>/select/<int:coordinate_x>/<int:coordinate_y>/<int:coordinate_z>' %}
                                        {% if (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) in player_white.positions %}
                                            {% if ((row==coordinate_x + 1 and count_yz(row, column, 'y')==coordinate_y + 1) or (row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1) or (row==coordinate_x - 1 and count_yz(row, column, 'y')==coordinate_y - 1) or (count_yz(row, column, 'y')==coordinate_y + 1 and count_yz(row, column, 'z')==coordinate_z + 1) or (row==coordinate_x + 1 and count_yz(row, column, 'z')==coordinate_z - 1) or (count_yz(row, column, 'y')==coordinate_y - 1 and count_yz(row, column, 'z')==coordinate_z - 1) or (row==coordinate_x + 2 and count_yz(row, column, 'y')==coordinate_y + 2 and (coordinate_x + 1, coordinate_y + 1, coordinate_z) not in player_black.positions and (coordinate_x + 1, coordinate_y + 1, coordinate_z) in player_white.positions) or (row==coordinate_x - 2 and count_yz(row, column, 'y')==coordinate_y - 2 and (coordinate_x - 1, coordinate_y - 1, coordinate_z) not in player_black.positions and (coordinate_x - 1, coordinate_y - 1, coordinate_z) in player_white.positions) or (row==coordinate_x - 2 and count_yz(row, column, 'z')==coordinate_z + 2 and (coordinate_x - 1, coordinate_y, coordinate_z + 1) not in player_black.positions and (coordinate_x - 1, coordinate_y, coordinate_z + 1) in player_white.positions) or (row==coordinate_x + 2 and count_yz(row, column, 'z')==coordinate_z - 2 and (coordinate_x + 1, coordinate_y, coordinate_z - 1) not in player_black.positions and (coordinate_x + 1, coordinate_y, coordinate_z - 1) in player_white.positions) or (count_yz(row, column, 'y')==coordinate_y + 2 and count_yz(row, column, 'z')==coordinate_z + 2 and (coordinate_x, coordinate_y + 1, coordinate_z + 1) not in player_black.positions and (coordinate_x, coordinate_y + 1, coordinate_z + 1) in player_white.positions) or (count_yz(row, column, 'y')==coordinate_y - 2 and count_yz(row, column, 'z')==coordinate_z - 2 and (coordinate_x, coordinate_y - 1, coordinate_z - 1) not in player_black.positions and (coordinate_x, coordinate_y - 1, coordinate_z - 1) in player_white.positions) or (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)) %}
                                                <a href=" {{ url_for('select_multiple', game_id=game_id, coordinate_x=coordinate_x, coordinate_y=coordinate_y, coordinate_z=coordinate_z, second_x=row, second_y=count_yz(row, column, 'y'), second_z=count_yz(row, column, 'z')) }} " class="ball ball-white
                                                {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                    or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                {% endif %}"></a>
                                            {% else %}
                                                <div class ="ball ball-white"></div>
                                            {% endif %}
                                        {% elif (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) in player_black.positions %}
                                            <div class ="ball ball-black"></div>
                                        {% elif (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) not in player_white.positions and (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) not in player_black.positions %}
                                            {% if ((row==coordinate_x + 1 and count_yz(row, column, 'y')==coordinate_y + 1) or (row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1) or (row==coordinate_x - 1 and count_yz(row, column, 'y')==coordinate_y - 1) or (count_yz(row, column, 'y')==coordinate_y + 1 and count_yz(row, column, 'z')==coordinate_z + 1) or (row==coordinate_x + 1 and count_yz(row, column, 'z')==coordinate_z - 1) or (count_yz(row, column, 'y')==coordinate_y - 1 and count_yz(row, column, 'z')==coordinate_z - 1)) %}
                                                <a href="{{ url_for('move', game_id=game_id, coordinate_x=coordinate_x, coordinate_y=coordinate_y, coordinate_z=coordinate_z, to_x=row, to_y=count_yz(row, column, 'y'), to_z=count_yz(row, column, 'z')) }}" class="slot"></a>
                                            {% endif %}
                                        {% endif %}
                                    {% elif rule == '/game/<string:game_id>/select/<int:coordinate_x>/<int:coordinate_y>/<int:coordinate_z>/<int:second_x>/<int:second_y>/<int:second_z>' %}
                                            {% if (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) in player_white.positions %}
                                                 {% if second_x==coordinate_x + 2 and second_y==coordinate_y + 2 %}
                                                    {% if row==coordinate_x + 1 and count_yz(row, column, 'y')==coordinate_y + 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white ball-selected"></a>
                                                    {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% elif coordinate_x==second_x + 2 and coordinate_y==second_y + 2 %}
                                                     {% if row==second_x + 1 and count_yz(row, column, 'y')==second_y + 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white ball-selected"></a>
                                                    {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% elif second_x==coordinate_x - 2 and second_y==coordinate_y - 2 %}
                                                    {% if row==coordinate_x - 1 and count_yz(row, column, 'y')==coordinate_y - 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white ball-selected"></a>
                                                    {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% elif coordinate_x==second_x - 2 and coordinate_y==second_y - 2 %}
                                                     {% if row==second_x - 1 and count_yz(row, column, 'y')==second_y - 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white ball-selected"></a>
                                                    {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% elif second_x==coordinate_x - 2 and second_z==coordinate_z + 2 %}
                                                    {% if row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white ball-selected"></a>
                                                    {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% elif coordinate_x==second_x - 2 and coordinate_z==second_z + 2 %}
                                                     {% if row==second_x - 1 and count_yz(row, column, 'z')==second_z + 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white ball-selected"></a>
                                                    {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% elif second_x==coordinate_x + 2 and second_z==coordinate_z - 2 %}
                                                    {% if row==coordinate_x + 1 and count_yz(row, column, 'z')==coordinate_z - 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white ball-selected"></a>
                                                    {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% elif coordinate_x==second_x + 2 and coordinate_z==second_z - 2 %}
                                                     {% if row==second_x + 1 and count_yz(row, column, 'z')==second_z - 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white ball-selected"></a>
                                                    {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% elif second_y==coordinate_y + 2 and second_z==coordinate_z + 2 %}
                                                    {% if count_yz(row, column, 'y')==coordinate_y + 1 and count_yz(row, column, 'z')==coordinate_z + 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white ball-selected"></a>
                                                    {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% elif coordinate_y==second_y + 2 and coordinate_z==second_z + 2 %}
                                                     {% if count_yz(row, column, 'y')==second_y + 1 and count_yz(row, column, 'z')==second_z + 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white ball-selected"></a>
                                                    {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% elif second_y==coordinate_y - 2 and second_z==coordinate_z - 2 %}
                                                    {% if count_yz(row, column, 'y')==coordinate_y - 1 and count_yz(row, column, 'z')==coordinate_z - 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white ball-selected"></a>
                                                    {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% elif coordinate_y==second_y - 2 and coordinate_z==second_z - 2 %}
                                                     {% if count_yz(row, column, 'y')==second_y - 1 and count_yz(row, column, 'z')==second_z - 1 %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white ball-selected"></a>
                                                     {% else %}
                                                        <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                    {% endif %}
                                                 {% else %}
                                                     <a href=" {{ url_for('select', game_id=game_id, coordinate_x=row, coordinate_y=count_yz(row, column, 'y'), coordinate_z=count_yz(row, column, 'z')) }}" class="ball ball-white
                                                        {% if (row==coordinate_x and count_yz(row, column, 'y')==coordinate_y and count_yz(row, column, 'z')==coordinate_z)
                                                            or (row==second_x and count_yz(row, column, 'y')==second_y and count_yz(row, column, 'z')==second_z) %}ball-selected
                                                        {% endif %}"></a>
                                                 {% endif %}
                                            {% elif (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) in player_black.positions %}
                                                {% if row==coordinate_x==second_x or count_yz(row, column, 'y')==coordinate_y==second_y or count_yz(row, column, 'z')==coordinate_z==second_z %}
                                                    {% if (second_x - coordinate_x==1 or coordinate_x - second_x==1) or (second_y - coordinate_y==1 or coordinate_y - second_y==1) or (second_z - coordinate_z==1 or coordinate_z - second_z==1) %}
                                                        {% if (count_yz(row, column, 'y')==coordinate_y - 1 and count_yz(row, column, 'z')==coordinate_z - 1 and (coordinate_x, coordinate_y - 2, coordinate_z - 2) not in player_white.positions and (coordinate_x, coordinate_y - 2, coordinate_z - 2) not in player_black.positions) or (count_yz(row, column, 'y')==second_y - 1 and count_yz(row, column, 'z')==second_z - 1 and (second_x, second_y - 2, second_z - 2) not in player_white.positions and (second_x, second_y - 2, second_z - 2) not in player_black.positions) or (count_yz(row, column, 'y')==coordinate_y + 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x, coordinate_y + 2, coordinate_z + 2) not in player_white.positions and (coordinate_x, coordinate_y + 2, coordinate_z + 2) not in player_black.positions) or (count_yz(row, column, 'y')==second_y + 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x, second_y + 2, second_z + 2) not in player_white.positions and (second_x, second_y + 2, second_z + 2) not in player_black.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x - 2, coordinate_y, coordinate_z + 2) not in player_white.positions and (coordinate_x - 2, coordinate_y, coordinate_z + 2) not in player_black.positions) or (row==second_x - 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x - 2, second_y, second_z + 2) not in player_white.positions and (second_x - 2, second_y, second_z + 2) not in player_black.positions) or (row==coordinate_x + 1 and count_yz(row, column, 'z')==coordinate_z - 1 and (coordinate_x + 2, coordinate_y, coordinate_z - 2) not in player_white.positions and (coordinate_x + 2, coordinate_y, coordinate_z - 2) not in player_black.positions) or (row==second_x + 1 and count_yz(row, column, 'z')==second_z - 1 and (second_x + 2, second_y, second_z - 2) not in player_white.positions and (second_x + 2, second_y, second_z - 2) not in player_black.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x - 2, coordinate_y, coordinate_z + 2) not in player_white.positions and (coordinate_x - 2, coordinate_y, coordinate_z + 2) not in player_black.positions) or (row==second_x - 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x - 2, second_y, second_z + 2) not in player_white.positions and (second_x - 2, second_y, second_z + 2) not in player_black.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'y')==coordinate_y - 1 and (coordinate_x - 2, coordinate_y - 2, coordinate_z) not in player_white.positions and (coordinate_x - 2, coordinate_y - 2, coordinate_z) not in player_black.positions) or (row==second_x - 1 and count_yz(row, column, 'y')==second_y - 1 and (second_x - 2, second_y - 2, second_z) not in player_white.positions and (second_x - 2, second_y - 2, second_z) not in player_black.positions) or (row==coordinate_x + 1 and count_yz(row, column, 'y')==coordinate_y + 1 and (coordinate_x + 2, coordinate_y + 2, coordinate_z) not in player_white.positions and (coordinate_x + 2, coordinate_y + 2, coordinate_z) not in player_black.positions) or (row==second_x + 1 and count_yz(row, column, 'y')==second_y + 1 and (second_x + 2, second_y + 2, second_z) not in player_white.positions and (second_x + 2, second_y + 2, second_z) not in player_black.positions) %}
                                                            <a href="{{ url_for('move_multiple', game_id=game_id, coordinate_x=coordinate_x, coordinate_y=coordinate_y, coordinate_z=coordinate_z, second_x=second_x, second_y=second_y, second_z=second_z, to_x=row, to_y=count_yz(row, column, 'y'), to_z=count_yz(row, column, 'z')) }}" class="ball ball-black ball-to-push"></a>
                                                        {% else %}
                                                            <div class="ball ball-black"></div>
                                                        {% endif %}
                                                    {% elif (second_x - coordinate_x==2 or coordinate_x - second_x==2) or (second_y - coordinate_y==2 or coordinate_y - second_y==2) or (second_z - coordinate_z==2 or coordinate_z - second_z==2) %}
                                                        {% if (count_yz(row, column, 'y')==coordinate_y - 1 and count_yz(row, column, 'z')==coordinate_z - 1 and (coordinate_x, coordinate_y - 2, coordinate_z - 2) not in player_white.positions and (coordinate_x, coordinate_y - 2, coordinate_z - 2) not in player_black.positions) or (count_yz(row, column, 'y')==second_y - 1 and count_yz(row, column, 'z')==second_z - 1 and (second_x, second_y - 2, second_z - 2) not in player_white.positions and (second_x, second_y - 2, second_z - 2) not in player_black.positions) or (count_yz(row, column, 'y')==coordinate_y + 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x, coordinate_y + 2, coordinate_z + 2) not in player_white.positions and (coordinate_x, coordinate_y + 2, coordinate_z + 2) not in player_black.positions) or (count_yz(row, column, 'y')==second_y + 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x, second_y + 2, second_z + 2) not in player_white.positions and (second_x, second_y + 2, second_z + 2) not in player_black.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x - 2, coordinate_y, coordinate_z + 2) not in player_white.positions and (coordinate_x - 2, coordinate_y, coordinate_z + 2) not in player_black.positions) or (row==second_x - 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x - 2, second_y, second_z + 2) not in player_white.positions and (second_x - 2, second_y, second_z + 2) not in player_black.positions) or (row==coordinate_x + 1 and count_yz(row, column, 'z')==coordinate_z - 1 and (coordinate_x + 2, coordinate_y, coordinate_z - 2) not in player_white.positions and (coordinate_x + 2, coordinate_y, coordinate_z - 2) not in player_black.positions) or (row==second_x + 1 and count_yz(row, column, 'z')==second_z - 1 and (second_x + 2, second_y, second_z - 2) not in player_white.positions and (second_x + 2, second_y, second_z - 2) not in player_black.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x - 2, coordinate_y, coordinate_z + 2) not in player_white.positions and (coordinate_x - 2, coordinate_y, coordinate_z + 2) not in player_black.positions) or (row==second_x - 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x - 2, second_y, second_z + 2) not in player_white.positions and (second_x - 2, second_y, second_z + 2) not in player_black.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'y')==coordinate_y - 1 and (coordinate_x - 2, coordinate_y - 2, coordinate_z) not in player_white.positions and (coordinate_x - 2, coordinate_y - 2, coordinate_z) not in player_black.positions) or (row==second_x - 1 and count_yz(row, column, 'y')==second_y - 1 and (second_x - 2, second_y - 2, second_z) not in player_white.positions and (second_x - 2, second_y - 2, second_z) not in player_black.positions) or (row==coordinate_x + 1 and count_yz(row, column, 'y')==coordinate_y + 1 and (coordinate_x + 2, coordinate_y + 2, coordinate_z) not in player_white.positions and (coordinate_x + 2, coordinate_y + 2, coordinate_z) not in player_black.positions) or (row==second_x + 1 and count_yz(row, column, 'y')==second_y + 1 and (second_x + 2, second_y + 2, second_z) not in player_white.positions and (second_x + 2, second_y + 2, second_z) not in player_black.positions) %}
                                                            <a href="{{ url_for('move_multiple', game_id=game_id, coordinate_x=coordinate_x, coordinate_y=coordinate_y, coordinate_z=coordinate_z, second_x=second_x, second_y=second_y, second_z=second_z, to_x=row, to_y=count_yz(row, column, 'y'), to_z=count_yz(row, column, 'z')) }}" class="ball ball-black ball-to-push"></a>
                                                        {% elif (count_yz(row, column, 'y')==coordinate_y - 1 and count_yz(row, column, 'z')==coordinate_z - 1 and (coordinate_x, coordinate_y - 2, coordinate_z - 2) in player_white.positions and (coordinate_x, coordinate_y - 3, coordinate_z - 3) not in player_black.positions and (coordinate_x, coordinate_y - 3, coordinate_z - 3) not in player_white.positions) or (count_yz(row, column, 'y')==second_y - 1 and count_yz(row, column, 'z')==second_z - 1 and (second_x, second_y - 2, second_z - 2) in player_white.positions and (second_x, second_y - 3, second_z - 3) not in player_black.positions and (second_x, second_y - 3, second_z - 3) not in player_white.positions) or (count_yz(row, column, 'y')==coordinate_y + 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x, coordinate_y + 2, coordinate_z + 2) in player_white.positions and (coordinate_x, coordinate_y + 3, coordinate_z + 3) not in player_black.positions and (coordinate_x, coordinate_y + 3, coordinate_z + 3) not in player_white.positions) or (count_yz(row, column, 'y')==second_y + 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x, second_y + 2, second_z + 2) in player_white.positions and (second_x, second_y + 3, second_z + 3) not in player_black.positions and (second_x, second_y + 3, second_z + 3) not in player_white.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x - 2, coordinate_y, coordinate_z + 2) in player_white.positions and (coordinate_x - 3, coordinate_y, coordinate_z + 3) not in player_black.positions and (coordinate_x - 3, coordinate_y, coordinate_z + 3) not in player_white.positions) or (row==second_x - 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x - 2, second_y, second_z + 2) in player_white.positions and (second_x - 3, second_y, second_z + 3) not in player_black.positions  and (second_x - 3, second_y, second_z + 3) not in player_white.positions) or (row==coordinate_x + 1 and count_yz(row, column, 'z')==coordinate_z - 1 and (coordinate_x + 2, coordinate_y, coordinate_z - 2) in player_white.positions and (coordinate_x + 3, coordinate_y, coordinate_z - 3) not in player_black.positions and (coordinate_x + 3, coordinate_y, coordinate_z - 3) not in player_white.positions) or (row==second_x + 1 and count_yz(row, column, 'z')==second_z - 1 and (second_x + 2, second_y, second_z - 2) in player_white.positions and (second_x + 3, second_y, second_z - 3) not in player_black.positions and (second_x + 3, second_y, second_z - 3) not in player_white.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x - 2, coordinate_y, coordinate_z + 2) in player_white.positions and (coordinate_x - 3, coordinate_y, coordinate_z + 3) not in player_black.positions and (coordinate_x - 3, coordinate_y, coordinate_z + 3) not in player_white.positions) or (row==second_x - 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x - 2, second_y, second_z + 2) in player_white.positions and (second_x - 3, second_y, second_z + 3) not in player_black.positions and (second_x - 3, second_y, second_z + 3) not in player_white.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'y')==coordinate_y - 1 and (coordinate_x - 2, coordinate_y - 2, coordinate_z) in player_white.positions and (coordinate_x - 3, coordinate_y - 3, coordinate_z) not in player_black.positions and (coordinate_x - 3, coordinate_y - 3, coordinate_z) not in player_white.positions) or (row==second_x - 1 and count_yz(row, column, 'y')==second_y - 1 and (second_x - 2, second_y - 2, second_z) in player_white.positions and (second_x - 3, second_y - 3, second_z) not in player_black.positions and (second_x - 3, second_y - 3, second_z) not in player_white.positions) or (row==coordinate_x + 1 and count_yz(row, column, 'y')==coordinate_y + 1 and (coordinate_x + 2, coordinate_y + 2, coordinate_z) in player_white.positions and (coordinate_x + 3, coordinate_y + 3, coordinate_z) not in player_black.positions and (coordinate_x + 3, coordinate_y + 3, coordinate_z) not in player_white.positions) or (row==second_x + 1 and count_yz(row, column, 'y')==second_y + 1 and (second_x + 2, second_y + 2, second_z) in player_white.positions and (second_x + 3, second_y + 3, second_z) not in player_black.positions and (second_x + 3, second_y + 3, second_z) not in player_white.positions) %}
                                                            <a href="{{ url_for('move_multiple', game_id=game_id, coordinate_x=coordinate_x, coordinate_y=coordinate_y, coordinate_z=coordinate_z, second_x=second_x, second_y=second_y, second_z=second_z, to_x=row, to_y=count_yz(row, column, 'y'), to_z=count_yz(row, column, 'z')) }}" class="ball ball-black ball-to-push"></a>
                                                        {% else %}
                                                            <div class="ball ball-black"></div>
                                                        {% endif %}
                                                    {% else %}
                                                        <div class="ball ball-black"></div>
                                                    {% endif %}
                                                {% else %}
                                                    <div class="ball ball-black"></div>
                                                {% endif %}
                                            {% elif (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) not in player_white.positions and (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) not in player_black.positions %}
                                                {% if coordinate_x == second_x %}
                                                    {% if coordinate_y - second_y > 0 and coordinate_z - second_z > 0 %}
                                                        {% if ((row==coordinate_x + 1 and count_yz(row, column, 'y')==coordinate_y + 1 and (coordinate_x + 1, coordinate_y, coordinate_z - 1) not in player_black.positions and (coordinate_x + 1, coordinate_y, coordinate_z - 1) not in player_white.positions and (second_x + 1, second_y + 1, second_z) not in player_black.positions and (second_x + 1, second_y + 1, second_z) not in player_white.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x - 1, coordinate_y - 1, coordinate_z) not in player_black.positions and (coordinate_x - 1, coordinate_y - 1, coordinate_z) not in player_white.positions and (second_x - 1, second_y, second_z + 1) not in player_black.positions and (second_x - 1, second_y, second_z + 1) not in player_white.positions) or (count_yz(row, column, 'y')==coordinate_y + 1 and count_yz(row, column, 'z')==coordinate_z + 1) or (count_yz(row, column, 'y')==coordinate_y - 1 and count_yz(row, column, 'z')==coordinate_z - 1) or (row==second_x - 1 and count_yz(row, column, 'y')==second_y - 1 and (second_x - 1, second_y, second_z + 1) not in player_black.positions and (second_x - 1, second_y, second_z + 1) not in player_white.positions and (coordinate_x - 1, coordinate_y - 1, coordinate_z) not in player_black.positions and (coordinate_x - 1, coordinate_y - 1, coordinate_z) not in player_white.positions) or (row==second_x + 1 and count_yz(row, column, 'z')==second_z - 1 and (second_x + 1, second_y + 1, second_z) not in player_black.positions and (second_x + 1, second_y + 1, second_z) not in player_white.positions and (coordinate_x + 1, coordinate_y, coordinate_z - 1) not in player_black.positions and (coordinate_x + 1, coordinate_y, coordinate_z - 1) not in player_white.positions) or (count_yz(row, column, 'y')==second_y + 1 and count_yz(row, column, 'z')==second_z + 1) or (count_yz(row, column, 'y')==second_y - 1 and count_yz(row, column, 'z')==second_z - 1)) %}
                                                            <a href="{{ url_for('move_multiple', game_id=game_id, coordinate_x=coordinate_x, coordinate_y=coordinate_y, coordinate_z=coordinate_z, second_x=second_x, second_y=second_y, second_z=second_z, to_x=row, to_y=count_yz(row, column, 'y'), to_z=count_yz(row, column, 'z')) }}" class="slot"></a>
                                                        {% endif %}
                                                    {% elif coordinate_y - second_y < 0 and coordinate_z - second_z < 0 %}
                                                        {% if ((row==second_x + 1 and count_yz(row, column, 'y')==second_y + 1 and (second_x + 1, second_y, second_z - 1) not in player_black.positions and (second_x + 1, second_y, second_z - 1) not in player_white.positions and (coordinate_x + 1, coordinate_y + 1, coordinate_z) not in player_black.positions and (coordinate_x + 1, coordinate_y + 1, coordinate_z) not in player_white.positions) or (row==second_x - 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x - 1, second_y - 1, second_z) not in player_black.positions and (second_x - 1, second_y - 1, second_z) not in player_white.positions and (coordinate_x - 1, coordinate_y, coordinate_z + 1) not in player_black.positions and (coordinate_x - 1, coordinate_y, coordinate_z + 1) not in player_white.positions) or (count_yz(row, column, 'y')==second_y + 1 and count_yz(row, column, 'z')==second_z + 1) or (count_yz(row, column, 'y')==second_y - 1 and count_yz(row, column, 'z')==second_z - 1) or (row==coordinate_x - 1 and count_yz(row, column, 'y')==coordinate_y - 1 and (coordinate_x - 1, coordinate_y, coordinate_z + 1) not in player_black.positions and (coordinate_x - 1, coordinate_y, coordinate_z + 1) not in player_white.positions and (second_x - 1, second_y - 1, second_z) not in player_black.positions and (second_x - 1, second_y - 1, second_z) not in player_white.positions) or (row==coordinate_x + 1 and count_yz(row, column, 'z')==coordinate_z - 1 and (coordinate_x + 1, coordinate_y + 1, coordinate_z) not in player_black.positions and (coordinate_x + 1, coordinate_y + 1, coordinate_z) not in player_white.positions and (second_x + 1, second_y, second_z - 1) not in player_black.positions and (second_x + 1, second_y, second_z - 1) not in player_white.positions) or (count_yz(row, column, 'y')==coordinate_y + 1 and count_yz(row, column, 'z')==coordinate_z + 1) or (count_yz(row, column, 'y')==coordinate_y - 1 and count_yz(row, column, 'z')==coordinate_z - 1)) %}
                                                            <a href="{{ url_for('move_multiple', game_id=game_id, coordinate_x=coordinate_x, coordinate_y=coordinate_y, coordinate_z=coordinate_z, second_x=second_x, second_y=second_y, second_z=second_z, to_x=row, to_y=count_yz(row, column, 'y'), to_z=count_yz(row, column, 'z')) }}" class="slot"></a>
                                                        {% endif %}
                                                    {% endif %}
                                                {% elif coordinate_y == second_y %}
                                                    {% if coordinate_x - second_x > 0 and coordinate_z - second_z < 0 %}
                                                        {% if ((row==second_x - 1 and count_yz(row, column, 'z')==second_z + 1) or (row==second_x - 1 and count_yz(row, column, 'y')==second_y - 1 and (second_x, second_y - 1, second_z - 1) not in player_black.positions and (second_x, second_y - 1, second_z - 1) not in player_white.positions and (coordinate_x - 1, coordinate_y - 1, coordinate_z) not in player_black.positions and (coordinate_x - 1, coordinate_y - 1, coordinate_z) not in player_white.positions) or (count_yz(row, column, 'y')==second_y + 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x + 1, second_y + 1, second_z) not in player_black.positions and (second_x + 1, second_y + 1, second_z) not in player_white.positions and (coordinate_x, coordinate_y + 1, coordinate_z + 1) not in player_black.positions and (coordinate_x, coordinate_y + 1, coordinate_z + 1) not in player_white.positions) or (row==second_x + 1 and count_yz(row, column, 'z')==second_z - 1) or (row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1) or (row==coordinate_x + 1 and count_yz(row, column, 'y')==coordinate_y + 1 and (coordinate_x, coordinate_y + 1, coordinate_z + 1) not in player_black.positions and (coordinate_x, coordinate_y + 1, coordinate_z + 1) not in player_white.positions and (second_x + 1, second_y + 1, second_z) not in player_black.positions and (second_x + 1, second_y + 1, second_z) not in player_white.positions) or (count_yz(row, column, 'y')==coordinate_y - 1 and count_yz(row, column, 'z')==coordinate_z - 1 and (coordinate_x - 1, coordinate_y - 1, coordinate_z) not in player_black.positions and (coordinate_x - 1, coordinate_y - 1, coordinate_z) not in player_white.positions and (second_x, second_y - 1, second_z - 1) not in player_black.positions and (second_x, second_y - 1, second_z - 1) not in player_white.positions) or (row==coordinate_x + 1 and count_yz(row, column, 'z')==coordinate_z - 1)) %}
                                                            <a href="{{ url_for('move_multiple', game_id=game_id, coordinate_x=coordinate_x, coordinate_y=coordinate_y, coordinate_z=coordinate_z, second_x=second_x, second_y=second_y, second_z=second_z, to_x=row, to_y=count_yz(row, column, 'y'), to_z=count_yz(row, column, 'z')) }}" class="slot"></a>
                                                        {% endif %}
                                                    {% elif coordinate_x - second_x < 0 and coordinate_z - second_z > 0 %}
                                                        {% if ((row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1) or (row==coordinate_x - 1 and count_yz(row, column, 'y')==coordinate_y - 1 and (coordinate_x, coordinate_y - 1, coordinate_z - 1) not in player_black.positions and (coordinate_x, coordinate_y - 1, coordinate_z - 1) not in player_white.positions and (second_x - 1, second_y - 1, second_z) not in player_black.positions and (second_x - 1, second_y - 1, second_z) not in player_white.positions) or (count_yz(row, column, 'y')==coordinate_y + 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x + 1, coordinate_y + 1, coordinate_z) not in player_black.positions and (coordinate_x + 1, coordinate_y + 1, coordinate_z) not in player_white.positions and (second_x, second_y + 1, second_z + 1) not in player_black.positions and (second_x, second_y + 1, second_z + 1) not in player_white.positions) or (row==coordinate_x + 1 and count_yz(row, column, 'z')==coordinate_z - 1) or (row==second_x - 1 and count_yz(row, column, 'z')==second_z + 1) or (row==second_x + 1 and count_yz(row, column, 'y')==second_y + 1 and (second_x, second_y + 1, second_z + 1) not in player_black.positions and (second_x, second_y + 1, second_z + 1) not in player_white.positions and (coordinate_x + 1, coordinate_y + 1, coordinate_z) not in player_black.positions and (coordinate_x + 1, coordinate_y + 1, coordinate_z) not in player_white.positions) or (count_yz(row, column, 'y')==second_y - 1 and count_yz(row, column, 'z')==second_z - 1 and (second_x - 1, second_y - 1, second_z) not in player_black.positions and (second_x - 1, second_y - 1, second_z) not in player_white.positions and (coordinate_x, coordinate_y - 1, coordinate_z - 1) not in player_black.positions and (coordinate_x, coordinate_y - 1, coordinate_z - 1) not in player_white.positions) or (row==second_x + 1 and count_yz(row, column, 'z')==second_z - 1)) %}
                                                            <a href="{{ url_for('move_multiple', game_id=game_id, coordinate_x=coordinate_x, coordinate_y=coordinate_y, coordinate_z=coordinate_z, second_x=second_x, second_y=second_y, second_z=second_z, to_x=row, to_y=count_yz(row, column, 'y'), to_z=count_yz(row, column, 'z')) }}" class="slot"></a>
                                                        {% endif %}
                                                    {% endif %}
                                                {% elif coordinate_z == second_z %}
                                                    {% if coordinate_y - second_y > 0 and coordinate_x - second_x > 0 %}
                                                        {% if ((row==coordinate_x + 1 and count_yz(row, column, 'y')==coordinate_y + 1) or (row==coordinate_x + 1 and count_yz(row, column, 'z')==coordinate_z - 1 and (coordinate_x, coordinate_y + 1, coordinate_z - 1) not in player_black.positions and (coordinate_x, coordinate_y + 1, coordinate_z - 1) not in player_white.positions and (second_x + 1, second_y, second_z - 1) not in player_black.positions and (second_x + 1, second_y, second_z - 1) not in player_white.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'y')==coordinate_y - 1) or (count_yz(row, column, 'y')==coordinate_y + 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x - 1, coordinate_y, coordinate_z + 1) not in player_black.positions and (coordinate_x - 1, coordinate_y, coordinate_z + 1) not in player_white.positions and (second_x, second_y + 1, second_z + 1) not in player_black.positions and (second_x, second_y + 1, second_z + 1) not in player_white.positions) or (row==second_x + 1 and count_yz(row, column, 'y')==second_y + 1) or (row==second_x - 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x, second_y + 1, second_z + 1) not in player_black.positions and (second_x, second_y + 1, second_z + 1) not in player_white.positions and (coordinate_x - 1, coordinate_y, coordinate_z + 1) not in player_black.positions and (coordinate_x - 1, coordinate_y, coordinate_z + 1) not in player_white.positions) or (row==second_x - 1 and count_yz(row, column, 'y')==second_y - 1) or (count_yz(row, column, 'y')==second_y - 1 and count_yz(row, column, 'z')==second_z - 1 and (second_x + 1, second_y, second_z - 1) not in player_black.positions and (second_x + 1, second_y, second_z - 1) not in player_white.positions and (coordinate_x , coordinate_y + 1, coordinate_z - 1) not in player_black.positions and (coordinate_x , coordinate_y + 1, coordinate_z - 1) not in player_white.positions)) %}
                                                            <a href="{{ url_for('move_multiple', game_id=game_id, coordinate_x=coordinate_x, coordinate_y=coordinate_y, coordinate_z=coordinate_z, second_x=second_x, second_y=second_y, second_z=second_z, to_x=row, to_y=count_yz(row, column, 'y'), to_z=count_yz(row, column, 'z')) }}" class="slot"></a>
                                                        {% endif %}
                                                    {% elif coordinate_y - second_y < 0 and coordinate_x - second_x < 0 %}
                                                        {% if ((row==second_x + 1 and count_yz(row, column, 'y')==second_y + 1) or (row==second_x + 1 and count_yz(row, column, 'z')==second_z - 1 and (second_x, second_y + 1, second_z - 1) not in player_black.positions and (second_x, second_y + 1, second_z - 1) not in player_white.positions and (coordinate_x + 1, coordinate_y, coordinate_z - 1) not in player_black.positions and (coordinate_x + 1, coordinate_y, coordinate_z - 1) not in player_white.positions) or (row==second_x - 1 and count_yz(row, column, 'y')==second_y - 1) or (count_yz(row, column, 'y')==second_y + 1 and count_yz(row, column, 'z')==second_z + 1 and (second_x - 1, second_y, second_z + 1) not in player_black.positions and (second_x - 1, second_y, second_z + 1) not in player_white.positions and (coordinate_x, coordinate_y + 1, coordinate_z + 1) not in player_black.positions and (coordinate_x, coordinate_y + 1, coordinate_z + 1) not in player_white.positions) or (row==coordinate_x + 1 and count_yz(row, column, 'y')==coordinate_y + 1) or (row==coordinate_x - 1 and count_yz(row, column, 'z')==coordinate_z + 1 and (coordinate_x, coordinate_y + 1, coordinate_z + 1) not in player_black.positions and (coordinate_x, coordinate_y + 1, coordinate_z + 1) not in player_white.positions and (second_x - 1, second_y, second_z + 1) not in player_black.positions and (second_x - 1, second_y, second_z + 1) not in player_white.positions) or (row==coordinate_x - 1 and count_yz(row, column, 'y')==coordinate_y - 1) or (count_yz(row, column, 'y')==coordinate_y - 1 and count_yz(row, column, 'z')==coordinate_z - 1 and (coordinate_x + 1, coordinate_y, coordinate_z - 1) not in player_black.positions and (coordinate_x + 1, coordinate_y, coordinate_z - 1) not in player_white.positions and (second_x , second_y + 1, second_z - 1) not in player_black.positions and (second_x , second_y + 1, second_z - 1) not in player_white.positions)) %}
                                                            <a href="{{ url_for('move_multiple', game_id=game_id, coordinate_x=coordinate_x, coordinate_y=coordinate_y, coordinate_z=coordinate_z, second_x=second_x, second_y=second_y, second_z=second_z, to_x=row, to_y=count_yz(row, column, 'y'), to_z=count_yz(row, column, 'z')) }}" class="slot"></a>
                                                        {% endif %}
                                                    {% endif %}
                                                {% endif %}
                                            {% endif %}
                                    {% endif %}
                                {% elif not guest and finish==0 %}
                                    {% if (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) in player_black.positions %}
                                        <div class="ball ball-black"></div>
                                    {% elif (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) in player_white.positions %}
                                        <div class="ball ball-white"></div>
                                    {% endif %}
                                {% elif guest and turn == creator.id and g.user.id != creator.id and finish==0 %}
                                    {% if (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) in player_black.positions %}
                                        <div class="ball ball-black"></div>
                                    {% elif (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) in player_white.positions %}
                                        <div class="ball ball-white"></div>
                                    {% endif %}
                                {% elif guest and turn == guest.id and g.user.id != guest.id and finish==0 %}
                                    {% if (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) in player_black.positions %}
                                        <div class="ball ball-black"></div>
                                    {% elif (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) in player_white.positions %}
                                        <div class="ball ball-white"></div>
                                    {% endif %}
                                {% elif finish==1 or finish==2 or finish==3 %}
                                    {% if (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) in player_black.positions %}
                                        <div class="ball ball-black"></div>
                                    {% elif (row, count_yz(row, column, 'y'), count_yz(row, column, 'z')) in player_white.positions %}
                                        <div class="ball ball-white"></div>
                                    {% endif %}
                                {% endif %}
                            </div>
                        {% endfor %}
                        </div>
                    {% endfor %}
                    </div>
                </div>
                <div class="column col-4 col-ml-auto">
                    <div class="score_board">
                        <div class="scores">
                            <h4> Punkty gracza 'nazwa_gracza'</h4>
                            {% for point in range(points_for_black) %}
                                <div class="white_point"></div>
                            {% endfor %}
                        </div>
                        <div class="scores">
                            <h4> Punkty gracza 'nazwa_gracza'</h4>
                            {% for point in range(points_for_white) %}
                                <div class="black_point"></div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}
{% block script %}
    <input class="hidden" aria-hidden="true" value="{{ game_id }}" id="game_id">
    <script>
        $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
        // Force refresh
        var local_timestamp = 0;
        var game_id = $('input[id="game_id"]').val()
        $(function() {
            $.getJSON($SCRIPT_ROOT + '/_check_timestamp', {
                game_id: game_id
            }, function(data) {
                local_timestamp = data.timestamp;
                console.log('Fetched initial game timestamp at ' + new Date($.now()));
            });
            (function check() {
                setTimeout(function () {
                    console.log('Checked the timestamp at ' + new Date($.now()));
                    $.getJSON($SCRIPT_ROOT + '/_check_timestamp', {
                        game_id: game_id
                    }, function (data) {
                        if (data.timestamp > local_timestamp) {
                            location.reload();
                        }
                    });
                    check();
                }, 2000);  // This may bloat the server heavily :/
            })();
        });
    </script>
{% endblock %}

